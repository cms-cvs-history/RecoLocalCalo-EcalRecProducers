process ProcessOne = {
  source = DAQEcalTBInputService{
            untracked   string fileName = '/u1/rahatlou/data/h4/SM5-COSMIC-H4-000000643-STD'
            untracked int32 maxEvents = 5
            uint32 runNumber = 72999
            # next line is needed only for the older ascii raw data files.
            # when running on the latest raw data in binary format comment the following line
            bool isBinary = false
  }

  es_source = PoolDBESSource { VPSet toGet = {
                                {string record = "EcalPedestalsRcd"
                                 string tag = "EcalPedestals_2008_test"},
                                {string record = "EcalWeightRecAlgoWeightsRcd"
                                 string tag = "EcalWeightRecAlgoWeights_h4_sm5"}
                               }
                               bool loadAll = true
                               string connect = "sqlite_file:ecalwgt.db"
                               string timetype = "runnumber"
  }

  # unpack raw data from test beam
  module ecalEBunpacker = EcalDCCUnpackingModule{ }

  # dump all digis in each event
  module digidumper = EcalDigiDumperModule { }

  # simple analyzer of digi collections
  module reader = EcalDigiAnalyzer {
   string digiProducer   = "maker"
   string digiCollection = "EBDigiCollection"
  }

  # producer of rechits starting from digis
  module uncalibHitMaker = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalEBunpacker"
   string digiCollection = ""
   string hitCollection  = "EcalEBUncalibRecHits"
   untracked int32 nMaxPrintout = 1
  }

  module counter = AsciiOutputModule {
   untracked uint32 verbosity = 1
  }

  path p = { ecalEBunpacker, uncalibHitMaker  }

  endpath ep = { counter }

}

