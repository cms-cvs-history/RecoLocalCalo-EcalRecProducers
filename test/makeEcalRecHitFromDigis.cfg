process ProcessOne = {
   service = MessageLogger
   {
      untracked vstring destinations = {"cerr", "cout"}
      PSet cerr                      = { string threshold = "WARNING" }
      PSet cout                      = { string threshold = "INFO" }
#      vstring debugModules = { "ecalrechitZS" } 

      untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}
      vstring categories = { "FwkJob" }

      PSet FrameworkJobReport.xml = {
                                PSet default = { int32 limit = 0 }
                                PSet FwkJob = { int32 limit = 10000000 }
                                    }

   }

   service = Timing { } 
 #######################################################################################
 # input
  source = PoolSource {
     untracked vstring fileNames = {'rfio:/castor/cern.ch/user/f/fabiocos/Validation/EcalDigis/output_0_6_0/Photon_E200GeV_all_digis.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = false
  }
 #######################################################################################

 ###################################################################
 # Get hardcoded conditions the same used for standard digitization
  es_source = EcalTrivialConditionRetriever {
       #untracked double adcToGeVEBConstant = 0.0286
      untracked double adcToGeVEBConstant = 0.035
      untracked double adcToGeVEBConstant = 0.060
  }
 ###################################################################


 

 include "SimCalorimetry/EcalZeroSuppressionProducers/data/ecalGlobalZeroSuppression.cfi"



 #######################################################################################	
 # EB+EE uncalibrated RecHit producer 
 # Weight method (CMS standard requires tuned weights) 	

  module ecaluncalibrechit = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalGlobalZeroSuppression"
   string EBdigiCollection = ""
   string EEdigiCollection = ""
   string EBhitCollection  = "EcalUncalibRecHitsEB"
   string EEhitCollection  = "EcalUncalibRecHitsEE"
  }

  module ecalrechit = EcalRecHitProducer {
    string uncalibRecHitProducer   = "ecaluncalibrechit"
    string EBuncalibRecHitCollection = "EcalUncalibRecHitsEB"
    string EEuncalibRecHitCollection = "EcalUncalibRecHitsEE"
    string EBrechitCollection        = "EcalRecHitsEB"
    string EErechitCollection        = "EcalRecHitsEE"
  }


 #######################################################################################
 # ES RecHit producer (from Digis)
 include "RecoLocalCalo/EcalRecProducers/data/ESRecHitProducer.cfi"	
 #######################################################################################

 module out = PoolOutputModule 
  {	
     untracked string fileName = 'rechits.root'
      untracked vstring outputCommands = 
      {
        "keep *",
	"drop *_ecaldigi_*_*",
        "keep ESDataFramesSorted_ecaldigi_*_*"
      }
  }

 path p = { ecalGlobalZeroSuppression , ecaluncalibrechit , ecalrechit, esrechit }

 endpath ep = { out }

}