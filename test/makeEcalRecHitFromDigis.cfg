process ProcessOne = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

   service = Timing { } 
 #######################################################################################
 # input
  source = PoolSource {
     untracked vstring fileNames = {'file:/tmp/meridian/crazyee.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = false
  }
 #######################################################################################

 #Geometry
 #
 include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
 include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

 ###################################################################
 # Get hardcoded conditions the same used for standard digitization
 include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"


 ###################################################################

 include "SimCalorimetry/EcalZeroSuppressionProducers/data/ecalGlobalZeroSuppression.cfi"

 #######################################################################################	
 # EB+EE uncalibrated RecHit producer 
 # Weight method (CMS standard requires tuned weights) 	

  module ecaluncalibrechit = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalGlobalZeroSuppression"
   string EBdigiCollection = ""
   string EEdigiCollection = ""
   string EBhitCollection  = "EcalUncalibRecHitsEB"
   string EEhitCollection  = "EcalUncalibRecHitsEE"
  }

  module ecalrechit = EcalRecHitProducer {
    string uncalibRecHitProducer   = "ecaluncalibrechit"
    string EBuncalibRecHitCollection = "EcalUncalibRecHitsEB"
    string EEuncalibRecHitCollection = "EcalUncalibRecHitsEE"
    string EBrechitCollection        = "EcalRecHitsEB"
    string EErechitCollection        = "EcalRecHitsEE"
  }


 #######################################################################################
 # ES RecHit producer (from Digis)
 include "RecoLocalCalo/EcalRecProducers/data/ESRecHitProducer.cfi"	
 #######################################################################################

 module out = PoolOutputModule 
  {	
     untracked string fileName = 'rechits.root'
      untracked vstring outputCommands = 
      {
        "keep *",
	"drop *_ecalUnsuppressedDigis_*_*",
        "keep ESDataFramesSorted_ecalUnsuppressedDigis_*_*"
      }
  }

 path p = { ecalGlobalZeroSuppression , ecaluncalibrechit , ecalrechit, esrechit }

 endpath ep = { out }

}
