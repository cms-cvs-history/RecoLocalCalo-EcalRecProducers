process ProcessOne = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  untracked PSet maxEvents = {untracked int32 input = 1}  

   service = Timing { } 
 #######################################################################################
 # input
  source = PoolSource {
     untracked vstring fileNames = {'file:/afs/cern.ch/user/f/ferriff/scratch0/CMSSW/DataFrames/17X/src/Configuration/Examples/data/PhysVal-DiElectron-Ene10.root'}
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = false
  }
 #######################################################################################

 #Geometry
 #
 include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
 include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

 ###################################################################
 # Get hardcoded conditions the same used for standard digitization
 include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"
 include "CalibCalorimetry/EcalLaserCorrection/data/ecalLaserCorrectionService.cfi"


 ###################################################################

 include "SimCalorimetry/EcalZeroSuppressionProducers/data/ecalGlobalZeroSuppression.cfi"

 #######################################################################################	
 # EB+EE uncalibrated RecHit producer 
 # Weight method (CMS standard requires tuned weights) 	

  module ecaluncalibrechit = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalGlobalZeroSuppression"
   InputTag EBdigiCollection = ecalDigis:ebDigis
   InputTag EEdigiCollection = ecalDigis:eeDigis
   string EBhitCollection  = "EcalUncalibRecHitsEB"
   string EEhitCollection  = "EcalUncalibRecHitsEE"
  }

  module ecalrechit = EcalRecHitProducer {
    string uncalibRecHitProducer   = "ecaluncalibrechit"
    InputTag EBuncalibRecHitCollection = EcalUncalibRecHitsEB
    InputTag EEuncalibRecHitCollection = EcalUncalibRecHitsEE
    string EBrechitCollection        = "EcalRecHitsEB"
    string EErechitCollection        = "EcalRecHitsEE"
  }


 #######################################################################################
 # ES RecHit producer (from Digis)
 include "RecoLocalCalo/EcalRecProducers/data/ecalPreshowerRecHit.cfi"	
 #######################################################################################

 module out = PoolOutputModule 
  {	
     untracked string fileName = 'rechits.root'
      untracked vstring outputCommands = 
      {
        "keep *",
	"drop *_ecalUnsuppressedDigis_*_*",
        "keep ESDataFramesSorted_ecalUnsuppressedDigis_*_*"
      }
  }

 path p = { ecalGlobalZeroSuppression , ecaluncalibrechit , ecalrechit, ecalPreshowerRecHit }

 endpath ep = { out }

}
